<?php
function checkphoto($path, $startx, $starty, $stopx, $stopy) {
    $sums = 0;
    $img = imagecreatefromjpeg($path);
    $img1 = imagecreatetruecolor($stopx - $startx, $stopy - $starty);
    imagecopy($img1, $img, 0, 0, $startx, $starty, $stopx, $stopy);
    imagefilter($img1, IMG_FILTER_GRAYSCALE);
    for ($i = 0; $i < $stopx - $startx; $i++) {
        for ($j = 0; $j < $stopy - $starty; $j++) {
            $rgb = imagecolorat($img1, $i, $j);
            $r = ($rgb >> 16) & 0xFF;
            $g = ($rgb >> 8) & 0xFF;
            $b = $rgb & 0xFF;
            $gray = ($r + $g + $b) / 3;
            if ($gray > 160) {
                imagesetpixel($img1, $i, $j, 0xFFFFFF);
                $sums+= 0;
            } else {
                imagesetpixel($img1, $i, $j, 0x000000);
                $sums+= 1;
            }
        }
    }
    imagedestroy($img);
    imagedestroy($img1);
    return floor($sums / (($stopx - $startx) * ($stopy - $starty)) * 100);
}
function checkkaohao($photo,$json) {
    $config=json_decode($json);
    for($i=1;$i<=$config["numberOfColumns"];$i++)
    {
        for($j=0;$j<10;$j++)
        {
            
        }
    }
	return $kaohao;
}
$json='"numberOfColumns":5,
"1":[{
				"0":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"1":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"2":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"3":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"4":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"5":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"6":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"7":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"8":[{
					"startx":1761,
					"starty":1454,
					"stopx":1847,
					"stopy":1516
				}],
				"9":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}]
			}],
			"2":[{
				"0":[{
					"startx":1870,
					"starty":958,
					"stopx":1950,
					"stopy":1024
				}],
				"1":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"2":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"3":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"4":[{
					"startx":1870,
					"starty":1205,
					"stopx":1946,
					"stopy":1269
				}],
				"5":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"6":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"7":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"8":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}],
				"9":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}]
			}],
			"3":[{
				"0":[{
					"startx":2078,
					"starty":695,
					"stopx":2155,
					"stopy":1026
				}],
				"1":[{
					"startx":1975,
					"starty":1025,
					"stopx":2526,
					"stopy":980
				}],
				"2":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"3":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"4":[{
					"startx":1975,
					"starty":1212,
					"stopx":2047,
					"stopy":1267
				}],
				"5":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"6":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"7":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"8":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}],
				"9":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}]
			}],
			"4":[{
				"0":[{
					"startx":2078,
					"starty":960,
					"stopx":2157,
					"stopy":1029
				}],
				"1":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"2":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"3":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"4":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"5":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"6":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"7":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"8":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}],
				"9":[{
					"startx":1777,
					"starty":1495,
					"stopx":1830,
					"stopy":1528
				}]
			}],
			"5":[{
				"0":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"1":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"2":[{
					"startx":2178,
					"starty":1089,
					"stopx":2258,
					"stopy":1150
				}],
				"3":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"4":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"5":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"6":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"7":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"8":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}],
				"9":[{
					"startx":2426,
					"starty":880,
					"stopx":2526,
					"stopy":980
				}]
			}]';
echo checkkaohao("1.jpeg",$json);
?>